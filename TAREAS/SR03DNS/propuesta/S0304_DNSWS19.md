# ğŸ§ª **PrÃ¡ctica 4 â€” InstalaciÃ³n y puesta en marcha del servicio DNS en Windows Server 2019 â€” CreaciÃ³n de zona directa y resoluciÃ³n de nombres**

**MÃ³dulo:** Servicios en Red
**Unidad de Trabajo:** UT03 â€“ DNS
**SesiÃ³n:** 4

[Escenario de trabajo](#escenario-de-trabajo)

[1. ConfiguraciÃ³n de red en VirtualBox (red interna)](#1-configuraciÃ³n-de-red-en-virtualbox-red-interna)

[2. ConfiguraciÃ³n de IP estÃ¡tica en Windows Server](#2-configuraciÃ³n-de-ip-estÃ¡tica-en-windows-server)

[3. InstalaciÃ³n del rol DNS](#3-instalaciÃ³n-del-rol-dns)

[4. ComprobaciÃ³n del estado del servicio DNS](#4-comprobaciÃ³n-del-estado-del-servicio-dns)

[5. Primer acceso al Administrador DNS](#5-primer-acceso-al-administrador-dns)

[6. CreaciÃ³n de la zona directa](#6-creaciÃ³n-de-la-zona-directa)

[7. ObservaciÃ³n del registro SOA y NS](#7-observaciÃ³n-del-registro-soa-y-ns)

[8. CreaciÃ³n de registros A (hosts)](#8-creaciÃ³n-de-registros-a-hosts)

[9. CreaciÃ³n de un alias (CNAME)](#9-creaciÃ³n-de-un-alias-cname)

[10. ComprobaciÃ³n de la resoluciÃ³n desde un cliente](#5-comprobaciÃ³n-de-la-resoluciÃ³n-desde-un-cliente)

[QuÃ© se evalÃºa en esta prÃ¡ctica](#quÃ©-se-evalÃºa-en-esta-prÃ¡ctica)

[Idea clave que debe quedar clara](#idea-clave-que-debe-quedar-clara)

[Capturas que debes conservar de esta prÃ¡ctica](#capturas-que-debes-conservar-de-esta-prÃ¡ctica)

[QuÃ© **no** se hace en esta prÃ¡ctica](#quÃ©-no-se-hace-en-esta-prÃ¡ctica)

---

## Objetivo de la prÃ¡ctica

Instalar el servicio DNS en **Windows Server 2019**, configurar correctamente la **red interna y la IP estÃ¡tica**, y comprobar que el **servicio DNS estÃ¡ operativo**, dejando el servidor preparado para la creaciÃ³n de zonas y registros en las siguientes sesiones.

Crear una **zona de bÃºsqueda directa** en el servidor DNS y aÃ±adir **registros bÃ¡sicos coherentes**, comprobando desde un cliente que los nombres definidos se resuelven correctamente.

El objetivo no es â€œllenar el DNSâ€, sino **entender que DNS funciona a base de datos bien estructurados**.
---

## Escenario de trabajo

* Una mÃ¡quina virtual con **Windows Server 2019**.
* VirtualBox.
* Red configurada en **modo Red Interna**.
* No se requiere conexiÃ³n a Internet.
* Al menos un equipo cliente en la misma red interna.

---

## Tareas a realizar

---

## 1. ConfiguraciÃ³n de red en VirtualBox (red interna)

Configura la tarjeta de red de la mÃ¡quina virtual en **modo Red Interna**:

* VirtualBox â†’ ConfiguraciÃ³n â†’ Red â†’ Adaptador 1 â†’ **Red Interna**

ğŸ“Œ A partir de este momento, **no se cambiarÃ¡ el tipo de red** durante la prÃ¡ctica.

---

## 2. ConfiguraciÃ³n de IP estÃ¡tica en Windows Server

Configura una direcciÃ³n IP fija en el servidor, acorde a la red interna que se utilizarÃ¡ durante toda la UT.

Ejemplo de configuraciÃ³n:

* DirecciÃ³n IP: `192.168.2.1`
* MÃ¡scara: `255.255.255.0`
* Puerta de enlace: *(no necesaria en red interna)*
* DNS preferido: `192.168.2.1`

ğŸ“¸ **Captura 1:: 1-ip.png**

* Propiedades de IPv4 mostrando la IP estÃ¡tica configurada.

---

## 3. InstalaciÃ³n del rol DNS

Instala el servicio DNS utilizando **PowerShell**:

```powershell
Install-WindowsFeature -Name DNS -IncludeManagementTools
```
![alt text](image.png)

Comprueba que la instalaciÃ³n finaliza correctamente.

![alt text](image-1.png)


---

## 4. ComprobaciÃ³n del estado del servicio DNS

Comprueba que el servicio DNS estÃ¡ instalado y en ejecuciÃ³n:

```powershell
Get-Service -Name DNS
```

El servicio debe aparecer en estado **Running**.

ğŸ“¸ **Captura 2:: 2-instalado.png**

* Salida del comando `Get-Service -Name DNS` mostrando el servicio DNS en ejecuciÃ³n. Se debe ver el nombre de tu mÃ¡quina virtual.

---

## 5. Primer acceso al Administrador DNS

Abre la consola **Administrador de DNS**:

* Herramientas administrativas â†’ DNS

Observa:

* El nombre del servidor.
* La estructura inicial del servicio.
* Las carpetas de:

  * Zonas de bÃºsqueda directa
  * Zonas de bÃºsqueda inversa

ğŸ“Œ En este punto **no debe existir ninguna zona creada**.


ğŸ“¸ **Captura 3: 3-dns.png**

* Vista del Administrador DNS sin zonas configuradas.

![alt text](image-2.png)

## 6. CreaciÃ³n de la zona directa

En el **Administrador DNS** del servidor:

1. Accede a **Zonas de bÃºsqueda directa**.
2. Crea una nueva zona con las siguientes caracterÃ­sticas:
   * Tipo de zona: **Zona principal**
   * Nombre de la zona:

     ```
     tunombre.local
     ```

> *Crear un archivo nuevo con este nombre...*
>    *No permitir actualizaciones dinÃ¡micas.*
Finaliza el asistente y comprueba que la zona aparece creada.

![alt text](image-6.png)

![alt text](image-5.png)

![alt text](image-7.png)

ğŸ“¸ **Captura 4: 4-zona.png**

* Vista de la zona reciÃ©n creada

---

## 7. ObservaciÃ³n del registro SOA y NS

Dentro de la zona `ejemplo.local`, observa los registros creados automÃ¡ticamente:

* Registro **SOA**
* Registro(s) **NS**

Responde brevemente:

* Â¿Por quÃ© estos registros existen aunque no los hayas creado manualmente?
* Â¿QuÃ© informaciÃ³n general aporta cada uno?

ğŸ“Œ No es necesario modificar estos registros en esta prÃ¡ctica.

ğŸ“Œ En esta prÃ¡ctica **no es necesario modificar manualmente** los registros SOA y NS.

El objetivo en este punto es **identificar su existencia y comprender su funciÃ³n**:
- El registro **SOA** identifica al servidor DNS como autoridad de la zona.
- El registro **NS** indica quÃ© servidor o servidores responden por dicha zona.

En prÃ¡cticas posteriores se trabajarÃ¡ con mayor detalle su configuraciÃ³n y
su relaciÃ³n con la resoluciÃ³n inversa y la distribuciÃ³n del servicio DNS.

---

## 8. CreaciÃ³n de registros A (hosts)

AÃ±ade los siguientes registros **A** dentro de la zona:

![alt text](51.png)


| Nombre | DirecciÃ³n IP                      |
| ------ | --------------------------------- |
| `ns1`  | IP del servidor DNS               |
| `pc1`  | IP de un equipo cliente           |
| `www`  | IP de un equipo (real o ficticio) |

ğŸ“Œ **Importante**

* El registro `ns1` debe apuntar a la IP real del servidor DNS.
* Los demÃ¡s registros deben ser coherentes con la red interna.
* Dejar *Crear registro del puerto PTR asociado **desactivado**.

![alt text](image-8.png)

---

## 9. CreaciÃ³n de un alias (CNAME)

Crea un registro **CNAME** con las siguientes caracterÃ­sticas:

* Alias:

  ```
  web
  ```
* Nombre canÃ³nico:

  ```
  www.ejemplo.local
  ```

![alt text](../image-1.png)

![alt text](image-9.png)

*(CreaciÃ³n de registro CNAME)*

ğŸ“¸ **Captura 5: 5-registros.png**

* Vista de la zona reciÃ©n creada
---

## 5. ComprobaciÃ³n de la resoluciÃ³n desde un cliente

Desde un equipo cliente de la red interna, comprueba la resoluciÃ³n de los siguientes nombres:

* `ns1.ejemplo.local`
* `pc1.ejemplo.local`
* `web.ejemplo.local`

Utiliza herramientas de consulta vistas en sesiones anteriores (`ping`, `nslookup`).

![alt text](image-10.png)

ğŸ“¸ **Captura 6: 6-ping.png**

* Resultado de nslookup consultando todos los registros A creados y ping a todos los nombres.

ğŸ“Œ No es necesario que todos los nombres respondan a `ping`; lo importante es la **resoluciÃ³n DNS**.

---

## QuÃ© se evalÃºa en esta prÃ¡ctica

* CreaciÃ³n correcta de una zona directa.
* ComprensiÃ³n de los registros SOA y NS.
* Coherencia en los registros A creados.
* Uso correcto de un alias CNAME.
* Capacidad para comprobar la resoluciÃ³n desde cliente.

---

## Idea clave que debe quedar clara

> *Configurar DNS no es â€œactivar un servicioâ€,
> es definir correctamente los datos que describen una red.*

---

## Capturas que debes conservar de esta prÃ¡ctica

* ğŸ“¸ Captura 1 â†’ IP estÃ¡tica configurada
* ğŸ“¸ Captura 2 â†’ Servicio DNS en ejecuciÃ³n
* ğŸ“¸ Captura 3 â†’ Administrador DNS (estado inicial)
* ğŸ“¸ Captura 4 â†’ Vista de la nueva zona
* ğŸ“¸ Captura 5 â†’ Listado de registros creados
* ğŸ“¸ Captura 6 â†’ Nslookup y ping a todos los registros

---

## QuÃ© **no** se hace en esta prÃ¡ctica

âŒ No se configuran reenviadores
âŒ No se configuran servidores secundarios


