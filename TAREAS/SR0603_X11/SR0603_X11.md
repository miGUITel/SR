- [PrÃ¡ctica guiada: Uso de SSH con ReenvÃ­o X11 en Ubuntu Desktop](#prÃ¡ctica-guiada-uso-de-ssh-con-reenvÃ­o-x11-en-ubuntu-desktop)
  - [1. Instalar y configurar un ***SERVIDOR*** SSH en Ubuntu Desktop](#1-instalar-y-configurar-un-servidor-ssh-en-ubuntu-desktop)
  - [2. Habilitar el reenvÃ­o de X11 en el servidor SSH](#2-habilitar-el-reenvÃ­o-de-x11-en-el-servidor-ssh)
  - [3. Configurar el ***CLIENTE*** SSH para permitir reenvÃ­o X11](#3-configurar-el-cliente-ssh-para-permitir-reenvÃ­o-x11)
  - [4. Verificar que el entorno grÃ¡fico estÃ¡ activo en el cliente](#4-verificar-que-el-entorno-grÃ¡fico-estÃ¡-activo-en-el-cliente)
  - [5. Conectarse por SSH con reenvÃ­o X11](#5-conectarse-por-ssh-con-reenvÃ­o-x11)
  - [6. Ejecutar una aplicaciÃ³n grÃ¡fica en el servidor remoto](#6-ejecutar-una-aplicaciÃ³n-grÃ¡fica-en-el-servidor-remoto)
  - [7. Ejecutar comandos remotos sin sesiÃ³n interactiva](#7-ejecutar-comandos-remotos-sin-sesiÃ³n-interactiva)
  - [8. Capturas a entregar:](#8-capturas-a-entregar)
    - [ğŸ“¸ Captura 1 â€” ConexiÃ³n SSH con reenvÃ­o X11 activa](#-captura-1--conexiÃ³n-ssh-con-reenvÃ­o-x11-activa)
    - [ğŸ“¸ Captura 2 â€” AplicaciÃ³n grÃ¡fica visible y proceso activo en el servidor](#-captura-2--aplicaciÃ³n-grÃ¡fica-visible-y-proceso-activo-en-el-servidor)

# PrÃ¡ctica guiada: Uso de SSH con ReenvÃ­o X11 en Ubuntu Desktop

**IntroducciÃ³n**

En esta prÃ¡ctica vas a configurar y utilizar **SSH con reenvÃ­o X11** para ejecutar aplicaciones grÃ¡ficas en un equipo remoto y visualizarlas en tu equipo local.

âš ï¸ **Idea clave antes de empezar**
La aplicaciÃ³n **se ejecuta en el servidor**, pero **se muestra en el cliente**.
No se envÃ­a el programa, se envÃ­a el **dibujo de la ventana** a travÃ©s de la conexiÃ³n SSH.

---

**Pasos a seguir**

---

## 1. Instalar y configurar un ***SERVIDOR*** SSH en Ubuntu Desktop

* Objetivo

Disponer de un servidor SSH operativo que permita conexiones remotas.

* Pasos

1. Instala el servidor SSH:

   ```bash
   sudo apt update && sudo apt install openssh-server
   ```

2. Comprueba que el servicio estÃ¡ activo:

   ```bash
   sudo systemctl status ssh
   ```

* QuÃ© debes comprobar

* El servicio aparece como **active (running)**.
* Si no lo estÃ¡, no serÃ¡ posible continuar con la prÃ¡ctica.

---

## 2. Habilitar el reenvÃ­o de X11 en el servidor SSH

* Objetivo

Permitir que el servidor acepte la ejecuciÃ³n de aplicaciones grÃ¡ficas a travÃ©s de SSH.

* Pasos

1. Abre el archivo de configuraciÃ³n del servidor SSH:

   ```bash
   sudo nano /etc/ssh/sshd_config
   ```

2. Localiza y deja activadas (sin `#`) las siguientes lÃ­neas:

   ```
   X11Forwarding yes
   X11DisplayOffset 10
   ```

   Estas opciones indican que:

   * El servidor **acepta reenvÃ­o X11**.
   * Asigna pantallas virtuales a partir de un desplazamiento seguro.

![alt text](z1.png)

3. Reinicia el servicio SSH:

   ```bash
   sudo systemctl restart ssh
   ```

* QuÃ© debes comprobar

* No aparece ningÃºn error al reiniciar el servicio.
* El servicio sigue activo tras el reinicio.

---

## 3. Configurar el ***CLIENTE*** SSH para permitir reenvÃ­o X11

* Objetivo

Asegurarse de que el cliente SSH acepta aplicaciones grÃ¡ficas del servidor.

* Pasos

1. Verifica que el cliente SSH estÃ¡ instalado: (si ya lo estÃ¡, recibirÃ¡s un mensaje)

   ```bash
   sudo apt update && sudo apt install openssh-client
   ```

2. Comprueba que existe el directorio de configuraciÃ³n del cliente: (con el modificador -p , `mkdir`solo crea el directorio si no ***existe***)

   ```bash
   mkdir -p ~/.ssh/
   ```

3. Edita (o crea) el archivo de configuraciÃ³n del cliente:

   ```bash
   nano ~/.ssh/config
   ```

   - AÃ±ade el siguiente contenido:

      ```
      Host *
         ForwardX11 yes
      ```

* QuÃ© debes entender

* Esta configuraciÃ³n **habilita el reenvÃ­o X11 por defecto**.
* Aun asÃ­, mÃ¡s adelante forzarÃ¡s esta opciÃ³n explÃ­citamente con `-X`.

---

## 4. Verificar que el entorno grÃ¡fico estÃ¡ activo en el cliente

* Objetivo

Confirmar que el equipo cliente puede mostrar aplicaciones X11.

* Pasos

1. Comprueba el valor de la variable de entorno `DISPLAY`:

   ```bash
   echo $DISPLAY
   ```

2. El resultado deberÃ­a ser algo similar a:

   ```
   :0
   ```

   o

   ```
   :0.0
   ```

* QuÃ© debes comprobar

* Si no aparece ningÃºn valor, **no hay un entorno grÃ¡fico activo**.
* En ese caso, no podrÃ¡s continuar con la prÃ¡ctica.

---

## 5. Conectarse por SSH con reenvÃ­o X11

* Objetivo

Establecer una conexiÃ³n SSH que permita ejecutar aplicaciones grÃ¡ficas.

* Pasos

1. ConÃ©ctate al servidor usando:

   ```bash
   ssh -X usuario@direccion_ip_del_servidor
   ```

![alt text](z5.png)

2. Una vez conectado al servidor por SSH, comprueba en la sesiÃ³n remota el valor de la variable `DISPLAY`:

   ```bash
   echo $DISPLAY
   ```

3. El resultado serÃ¡ similar a:

   ```
   localhost:10.0
   ```

* QuÃ© debes entender

* El nÃºmero **no es el mismo** que en el cliente.
* SSH ha creado una **pantalla virtual** para reenviar grÃ¡ficos.

---

## 6. Ejecutar una aplicaciÃ³n grÃ¡fica en el servidor remoto

* 6.1 Ejecutar la aplicaciÃ³n

* Objetivo

Comprobar que una aplicaciÃ³n grÃ¡fica del servidor se muestra en el cliente.

1. Ejecuta en la sesiÃ³n SSH:

   ```bash
   xclock
   ```

2. Observa la ventana que aparece en tu escritorio local.

![alt text](z61.png)

* QuÃ© debes observar

* La ventana aparece **en el cliente**.
* El comando se ha ejecutado **en el servidor**.

---

* 6.2 Verificar la ejecuciÃ³n en el servidor

* Objetivo

Demostrar que el proceso pertenece al servidor, no al cliente.

1. En el servidor, revisa el log de autenticaciÃ³n:

   ```bash
   grep 'sshd' /var/log/auth.log
   ```

2. Comprueba que aparece una conexiÃ³n desde la IP del cliente.

3. Localiza el proceso de la aplicaciÃ³n:

   ```bash
   ps aux | grep xclock
   ```

4. Verifica que:

   * El proceso estÃ¡ activo.
   * Pertenece al usuario conectado por SSH.

![alt text](image.png)

* Idea clave

Aunque la ventana se vea en tu equipo, **el proceso vive en el servidor**.

---

## 7. Ejecutar comandos remotos sin sesiÃ³n interactiva

* Objetivo

Ejecutar Ã³rdenes directamente en el servidor sin abrir una sesiÃ³n SSH.

* Sintaxis general

```bash
ssh -X usuario@ipdelservidor comando
```

* Ejemplo

```bash
ssh -X miguel@172.100.50.25 mkdir 'NUEVO'
```

![alt text](image-1.png)


---

## 8. Capturas a entregar:

### ğŸ“¸ Captura 1 â€” ConexiÃ³n SSH con reenvÃ­o X11 activa

* QuÃ© debe mostrar la captura

Una **terminal con sesiÃ³n SSH abierta** desde el cliente hacia el servidor, en la que se vea claramente:

* El comando de conexiÃ³n utilizado:

  ```bash
  ssh -X usuario@ip_del_servidor
  ```
* El prompt del **servidor remoto** (nombre de mÃ¡quina o usuario distinto del cliente).
* La comprobaciÃ³n de la variable `DISPLAY`:

  ```bash
  echo $DISPLAY
  ```
* Un valor similar a:

  ```
  localhost:10.0
  ```

* QuÃ© demuestra didÃ¡cticamente

Esta captura prueba que:

* La conexiÃ³n SSH estÃ¡ funcionando.
* El reenvÃ­o X11 estÃ¡ **activo y operativo**.
* El alumno entiende que el entorno grÃ¡fico remoto se gestiona mediante variables de entorno.

Es la evidencia mÃ­nima de que **SSH + X11 estÃ¡ correctamente configurado**, incluso antes de ejecutar aplicaciones.

---

### ğŸ“¸ Captura 2 â€” AplicaciÃ³n grÃ¡fica visible y proceso activo en el servidor

* QuÃ© debe mostrar la captura

Una imagen (o pantalla partida) en la que se vea simultÃ¡neamente:

**Parte A â€“ En el cliente**

* La ventana de la aplicaciÃ³n grÃ¡fica `xclock` visible en el escritorio local.

**Parte B â€“ En la terminal del servidor**

* El comando:

  ```bash
  ps aux | grep xclock
  ```
* La lÃ­nea del proceso `xclock` en ejecuciÃ³n, asociada al usuario conectado por SSH.

* QuÃ© demuestra didÃ¡cticamente

Esta captura es la mÃ¡s importante, porque evidencia que:

* La aplicaciÃ³n **se ejecuta en el servidor**, no en el cliente.
* La interfaz grÃ¡fica se redirige correctamente.
* El alumno comprende (o al menos ha verificado) la separaciÃ³n **ejecuciÃ³n â†” visualizaciÃ³n**.

Con esta captura se desmonta el error conceptual mÃ¡s habitual:

> â€œLa aplicaciÃ³n se estÃ¡ ejecutando en mi equipo.â€
